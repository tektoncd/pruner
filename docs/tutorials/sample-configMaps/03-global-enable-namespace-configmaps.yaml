# Global Configuration Enabling Namespace-Level ConfigMaps
# This enables self-service: namespace owners can create their own ConfigMaps
# Recommended for multi-tenant clusters

apiVersion: v1
kind: ConfigMap
metadata:
  name: tekton-pruner-default-spec
  namespace: tekton-pipelines
  labels:
    app.kubernetes.io/part-of: tekton-pruner
    pruner.tekton.dev/config-type: global
data:
  global-config: |
    enforcedConfigLevel: namespace
    
    ttlSecondsAfterFinished: 3600
    successfulHistoryLimit: 5
    failedHistoryLimit: 5

---
# Example: Namespace-specific ConfigMap (created by namespace owner)
# IMPORTANT: 
#   - Name MUST be: tekton-pruner-namespace-spec
#   - Create in user namespace (NOT tekton-pipelines)
#   - Cannot be created in kube-*, openshift-*, or tekton-* namespaces

apiVersion: v1
kind: ConfigMap
metadata:
  name: tekton-pruner-namespace-spec
  namespace: my-app-namespace
  labels:
    app.kubernetes.io/part-of: tekton-pruner
    pruner.tekton.dev/config-type: namespace
data:
  ns-config: |
    ttlSecondsAfterFinished: 300
    successfulHistoryLimit: 3
    failedHistoryLimit: 5
